<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Geli≈ümi≈ü SimSimi AI</title>
    <style>
        :root {
            --primary: #ffe600; /* Simsimi sarƒ±sƒ± */
            --primary-dark: #e6cf00;
            --bg: #dbe4eb;
            --bot-msg: #ffffff;
            --user-msg: #ffe600;
            --text: #4a4a4a;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }

        body {
            background-color: var(--bg);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* --- √úST PANEL (XP & LEVEL) --- */
        header {
            background: rgba(255, 255, 255, 0.95);
            padding: 10px 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 10;
        }

        .profile {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .avatar {
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            border: 3px solid #fff;
            animation: bounce 2s infinite;
        }

        .info h3 { font-size: 16px; color: #333; margin-bottom: 2px; }
        .level-tag { 
            background: #ff4757; color: white; padding: 2px 8px; 
            border-radius: 10px; font-size: 11px; font-weight: bold; 
        }

        .xp-box { width: 120px; text-align: right; }
        .xp-label { font-size: 10px; color: #666; margin-bottom: 3px; display: block;}
        .xp-track { width: 100%; height: 8px; background: #eee; border-radius: 4px; overflow: hidden; }
        .xp-fill { height: 100%; background: #2ed573; width: 0%; transition: width 0.3s; }

        /* --- SOHBET ALANI --- */
        #chat-area {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background-image: radial-gradient(#cbd5e1 15%, transparent 16%);
            background-size: 20px 20px;
        }

        .msg {
            max-width: 80%;
            padding: 12px 18px;
            border-radius: 20px;
            font-size: 15px;
            line-height: 1.4;
            position: relative;
            word-wrap: break-word;
            animation: slideUp 0.3s ease;
        }

        .msg.bot {
            align-self: flex-start;
            background: var(--bot-msg);
            color: var(--text);
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .msg.user {
            align-self: flex-end;
            background: var(--user-msg);
            color: #5c4e00;
            border-bottom-right-radius: 4px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .time { font-size: 10px; opacity: 0.6; display: block; text-align: right; margin-top: 5px; }

        /* --- INPUT ALANI --- */
        .input-zone {
            background: white;
            padding: 10px;
            display: flex;
            gap: 10px;
            align-items: center;
            border-top: 1px solid #ddd;
        }

        #msg-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #eee;
            border-radius: 30px;
            font-size: 16px;
            outline: none;
            transition: 0.3s;
        }

        #msg-input:focus { border-color: var(--primary); }

        #send-btn {
            width: 55px;
            height: 55px;
            background: var(--primary);
            border: none;
            border-radius: 50%;
            color: #5c4e00;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        #send-btn:active { transform: scale(0.9); background: var(--primary-dark); }

        /* --- BA≈ûARIM POPUP (Olay burasƒ±) --- */
        .achievement {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%) translateY(-20px);
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #fff;
            padding: 10px 20px;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(255, 165, 0, 0.4);
            display: flex;
            align-items: center;
            gap: 10px;
            opacity: 0;
            pointer-events: none;
            z-index: 1000;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            border: 2px solid #fff;
        }

        .achievement.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .trophy-icon { font-size: 24px; }
        .ach-text { display: flex; flex-direction: column; }
        .ach-title { font-size: 10px; opacity: 0.9; text-transform: uppercase; font-weight: bold; }
        .ach-name { font-size: 14px; font-weight: bold; text-shadow: 0 1px 2px rgba(0,0,0,0.1); }

        /* --- D√ú≈û√úNME BALONU --- */
        .thinking {
            display: none;
            padding: 10px 20px;
            background: white;
            border-radius: 20px;
            margin-left: 20px;
            margin-bottom: 20px;
            width: fit-content;
        }
        .dot { display: inline-block; width: 8px; height: 8px; background: #ccc; border-radius: 50%; animation: wave 1.2s infinite; }
        .dot:nth-child(2) { animation-delay: 0.2s; }
        .dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes slideUp { from { transform: translateY(10px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        @keyframes wave { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
    </style>
</head>
<body>

    <header>
        <div class="profile">
            <div class="avatar">üê•</div>
            <div class="info">
                <h3>SimSimi Jr.</h3>
                <span class="level-tag" id="level-display">Lvl 1: Bebek</span>
            </div>
        </div>
        <div class="xp-box">
            <span class="xp-label" id="xp-text">0 / 50 XP</span>
            <div class="xp-track">
                <div class="xp-fill" id="xp-bar"></div>
            </div>
        </div>
    </header>

    <div class="achievement" id="ach-popup">
        <div class="trophy-icon">üèÜ</div>
        <div class="ach-text">
            <span class="ach-title">Ba≈üarƒ±m A√ßƒ±ldƒ±!</span>
            <span class="ach-name" id="ach-name">Laf Ebesi</span>
        </div>
    </div>

    <div id="chat-area">
        <div class="msg bot">
            Selam! Ben √∂ƒürenen bir yapay zekayƒ±m. Bana bir ≈üeyler √∂ƒüretir misin? üíõ
            <span class="time">≈ûimdi</span>
        </div>
    </div>

    <div class="thinking" id="thinking">
        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
    </div>

    <div class="input-zone">
        <input type="text" id="msg-input" placeholder="Mesaj yaz..." autocomplete="off">
        <button id="send-btn">‚û§</button>
    </div>

    <script>
        // --- YAPILANDIRMA ---
        const komikBasarimlar = [
            "Laf Ebesi", "Ordinaryus Prof.", "Dedikodu Kazanƒ±", 
            "Ayaklƒ± K√ºt√ºphane", "Filozof Atakan", "Bilgi K√ºp√º", 
            "Mahalle Muhtarƒ±", "Yapay Zeka Deƒüil, ≈ûaka", "Beyin Bedava", 
            "Ansiklopedi M√ºbarek", "S√ºper Dadƒ±"
        ];

        // --- VERƒ∞TABANI Y√úKLEME ---
        let brain = JSON.parse(localStorage.getItem('simBrain')) || {
            "merhaba": ["Selam!", "Naber m√ºd√ºr?", "Merhaba canƒ±m"],
            "naber": ["ƒ∞yidir senden?", "Yuvarlanƒ±p gidiyoruz", "Kodlarƒ±m ƒ±sƒ±nƒ±yor"],
            "adƒ±n ne": ["SimSimi Jr.", "Bana Civciv derler"],
            "seni kim yaptƒ±": ["M√ºkemmel bir yazƒ±lƒ±mcƒ±", "Kodlar beni var etti"]
        };

        let userState = JSON.parse(localStorage.getItem('simState')) || {
            level: 1,
            xp: 0,
            xpReq: 50
        };

        let pendingTrigger = null; // Botun cevap veremediƒüi son c√ºmle

        // --- SE√áƒ∞Cƒ∞LER ---
        const chatArea = document.getElementById('chat-area');
        const input = document.getElementById('msg-input');
        const sendBtn = document.getElementById('send-btn');
        const thinking = document.getElementById('thinking');
        const achPopup = document.getElementById('ach-popup');
        const achName = document.getElementById('ach-name');

        updateUI();

        // --- MESAJ G√ñNDERME ---
        function sendMessage() {
            const text = input.value.trim();
            if(!text) return;

            // Kullanƒ±cƒ± Mesajƒ±nƒ± Ekle
            addBubble(text, 'user');
            input.value = '';
            input.focus();

            // Hazƒ±rlƒ±k
            showThinking(true);
            chatArea.scrollTop = chatArea.scrollHeight;

            // Yapay Zeka ƒ∞≈ülemi (Gecikmeli)
            setTimeout(() => {
                processBotLogic(text);
            }, 800); // 0.8 saniye d√º≈ü√ºnme payƒ±
        }

        // --- YAPAY ZEKA MANTIƒûI ---
        function processBotLogic(text) {
            const cleanText = text.toLowerCase().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"");

            // 1. √ñƒûRENME MODU: Eƒüer bot bir √∂nceki c√ºmleye cevap veremediyse
            // ve kullanƒ±cƒ± ≈üimdi bir ≈üey yazdƒ±ysa, bu YENƒ∞ CEVAPTIR.
            if(pendingTrigger) {
                // Eƒüer daha √∂nce bilmiyorsa kaydet
                if(!brain[pendingTrigger]) {
                    brain[pendingTrigger] = [];
                }

                // Aynƒ± cevabƒ± tekrar kaydetme
                if(!brain[pendingTrigger].includes(text)) {
                    brain[pendingTrigger].push(text);
                    saveData();
                    triggerAchievement(); // BA≈ûARIM KAZANILDI!
                    
                    addBubble("Bunu hafƒ±zama kazƒ±dƒ±m! Te≈üekk√ºrler. üíõ", 'bot');
                    gainXP(20);
                } else {
                    addBubble("Bunu zaten biliyordum ama saƒü ol!", 'bot');
                }
                
                pendingTrigger = null; // √ñƒürenme tamamlandƒ±, sƒ±fƒ±rla
                showThinking(false);
                return;
            }

            // 2. CEVAP ARAMA MODU
            if(brain[cleanText]) {
                const answers = brain[cleanText];
                const randomAnswer = answers[Math.floor(Math.random() * answers.length)];
                addBubble(randomAnswer, 'bot');
                gainXP(5); // Sohbet ettiƒüi i√ßin az XP
            } else {
                // Bilmiyor!
                pendingTrigger = cleanText; // Bu c√ºmleyi hafƒ±zada tut, bir sonraki yazƒ±lan bunun cevabƒ± olacak.
                addBubble(`Bunu bilmiyorum... "${text}" ne demek? Bana √∂ƒüretir misin?`, 'bot');
                // Kullanƒ±cƒ± ≈üimdi ne yazarsa cevap olarak kaydedilecek.
            }

            showThinking(false);
        }

        // --- UI FONKSƒ∞YONLARI ---
        function addBubble(text, type) {
            const div = document.createElement('div');
            div.className = `msg ${type}`;
            const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            div.innerHTML = `${text} <span class="time">${time}</span>`;
            chatArea.insertBefore(div, thinking); // D√º≈ü√ºnme balonundan √∂nce ekle
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        function showThinking(show) {
            thinking.style.display = show ? 'block' : 'none';
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        // --- BA≈ûARIM Sƒ∞STEMƒ∞ ---
        function triggerAchievement() {
            // Rastgele komik isim se√ß
            const randomTitle = komikBasarimlar[Math.floor(Math.random() * komikBasarimlar.length)];
            achName.innerText = randomTitle;
            
            // G√∂ster
            achPopup.classList.add('show');
            
            // 3 Saniye sonra gizle
            setTimeout(() => {
                achPopup.classList.remove('show');
            }, 3000);
        }

        // --- XP Sƒ∞STEMƒ∞ ---
        function gainXP(amount) {
            userState.xp += amount;
            if(userState.xp >= userState.xpReq) {
                userState.level++;
                userState.xp = 0;
                userState.xpReq = Math.floor(userState.xpReq * 1.5);
                addBubble(`üéâ Vuhuu! Seviye atladƒ±m! Artƒ±k Level ${userState.level} oldum!`, 'bot');
            }
            saveData();
            updateUI();
        }

        function updateUI() {
            const xpPercent = (userState.xp / userState.xpReq) * 100;
            document.getElementById('xp-bar').style.width = `${xpPercent}%`;
            document.getElementById('xp-text').innerText = `${userState.xp} / ${userState.xpReq} XP`;
            
            let title = "Bebek";
            if(userState.level > 2) title = "√áocuk";
            if(userState.level > 5) title = "Ergen";
            if(userState.level > 10) title = "Dahi";
            document.getElementById('level-display').innerText = `Lvl ${userState.level}: ${title}`;
        }

        function saveData() {
            localStorage.setItem('simBrain', JSON.stringify(brain));
            localStorage.setItem('simState', JSON.stringify(userState));
        }

        // --- OLAY Dƒ∞NLEYƒ∞Cƒ∞LERƒ∞ ---
        sendBtn.addEventListener('click', sendMessage);
        input.addEventListener('keypress', (e) => {
            if(e.key === 'Enter') sendMessage();
        });

    </script>
</body>
</html>
